{"version":3,"file":"static/js/editPage.1546290a.chunk.js","mappings":"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","sources":["pages/question/Edit/EditToolbar.tsx","webpack://wenjuan-fe/./src/pages/question/Edit/EditHeader.module.scss?23c6","pages/question/Edit/EditHeader.tsx","hooks/useBindCanvasKeyPress.ts","components/DragSortable/SortableContainer.tsx","components/DragSortable/SortableItem.tsx","webpack://wenjuan-fe/./src/pages/question/Edit/EditCanvas.module.scss?87e9","pages/question/Edit/EditCanvas.tsx","webpack://wenjuan-fe/./src/pages/question/Edit/ComponentLib.module.scss?2dd0","pages/question/Edit/ComponentLib.tsx","webpack://wenjuan-fe/./src/pages/question/Edit/Layers.module.scss?5d47","pages/question/Edit/Layers.tsx","pages/question/Edit/LeftPanel.tsx","pages/question/Edit/ComponentProp.tsx","pages/question/Edit/PageSetting.tsx","pages/question/Edit/RightPanel.tsx","webpack://wenjuan-fe/./src/pages/question/Edit/index.module.scss?3778","pages/question/Edit/index.tsx"],"sourcesContent":["import React, { FC } from 'react'\nimport { Button, Space, Tooltip } from 'antd'\nimport {\n  DeleteOutlined,\n  EyeInvisibleOutlined,\n  LockOutlined,\n  CopyOutlined,\n  BlockOutlined,\n  UpOutlined,\n  DownOutlined,\n  UndoOutlined,\n  RedoOutlined,\n} from '@ant-design/icons'\nimport { useDispatch } from 'react-redux'\nimport { ActionCreators as UndoActionCreators } from 'redux-undo'\nimport {\n  removeSelectedComponent,\n  changeComponentHidden,\n  toggleComponentLocked,\n  copySelectedComponent,\n  pasteCopiedComponent,\n  moveComponent,\n} from '../../../store/componentsReducer'\nimport useGetComponentInfo from '../../../hooks/useGetComponentInfo'\n\nconst EditToolbar: FC = () => {\n  const dispatch = useDispatch()\n  const { selectedId, componentList, selectedComponent, copiedComponent } = useGetComponentInfo()\n  const { isLocked } = selectedComponent || {}\n  const length = componentList.length\n  const selectedIndex = componentList.findIndex(c => c.fe_id === selectedId)\n  const isFirst = selectedIndex <= 0 // 第一个\n  const isLast = selectedIndex + 1 >= length // 最后一个\n\n  // 删除组件\n  function handleDelete() {\n    dispatch(removeSelectedComponent())\n  }\n\n  // 隐藏组件\n  function handleHidden() {\n    dispatch(changeComponentHidden({ fe_id: selectedId, isHidden: true }))\n  }\n\n  // 锁定组件\n  function handleLock() {\n    dispatch(toggleComponentLocked({ fe_id: selectedId }))\n  }\n\n  // 复制\n  function copy() {\n    dispatch(copySelectedComponent())\n  }\n\n  // 粘贴\n  function paste() {\n    dispatch(pasteCopiedComponent())\n  }\n\n  // 上移\n  function moveUp() {\n    if (isFirst) return\n    dispatch(moveComponent({ oldIndex: selectedIndex, newIndex: selectedIndex - 1 }))\n  }\n\n  // 下移\n  function moveDown() {\n    if (isLast) return\n    dispatch(moveComponent({ oldIndex: selectedIndex, newIndex: selectedIndex + 1 }))\n  }\n\n  // 撤销\n  function undo() {\n    dispatch(UndoActionCreators.undo())\n  }\n\n  // 重做\n  function redo() {\n    dispatch(UndoActionCreators.redo())\n  }\n\n  return (\n    <Space>\n      <Tooltip title=\"删除\">\n        <Button shape=\"circle\" icon={<DeleteOutlined />} onClick={handleDelete}></Button>\n      </Tooltip>\n      <Tooltip title=\"隐藏\">\n        <Button shape=\"circle\" icon={<EyeInvisibleOutlined />} onClick={handleHidden}></Button>\n      </Tooltip>\n      <Tooltip title=\"锁定\">\n        <Button\n          shape=\"circle\"\n          icon={<LockOutlined />}\n          onClick={handleLock}\n          type={isLocked ? 'primary' : 'default'}\n        ></Button>\n      </Tooltip>\n      <Tooltip title=\"复制\">\n        <Button shape=\"circle\" icon={<CopyOutlined />} onClick={copy}></Button>\n      </Tooltip>\n      <Tooltip title=\"粘贴\">\n        <Button\n          shape=\"circle\"\n          icon={<BlockOutlined />}\n          onClick={paste}\n          disabled={copiedComponent == null}\n        ></Button>\n      </Tooltip>\n      <Tooltip title=\"上移\">\n        <Button shape=\"circle\" icon={<UpOutlined />} onClick={moveUp} disabled={isFirst}></Button>\n      </Tooltip>\n      <Tooltip title=\"下移\">\n        <Button\n          shape=\"circle\"\n          icon={<DownOutlined />}\n          onClick={moveDown}\n          disabled={isLast}\n        ></Button>\n      </Tooltip>\n      <Tooltip title=\"撤销\">\n        <Button shape=\"circle\" icon={<UndoOutlined />} onClick={undo}></Button>\n      </Tooltip>\n      <Tooltip title=\"重做\">\n        <Button shape=\"circle\" icon={<RedoOutlined />} onClick={redo}></Button>\n      </Tooltip>\n    </Space>\n  )\n}\n\nexport default EditToolbar\n","// extracted by mini-css-extract-plugin\nexport default {\"header-wrapper\":\"EditHeader_header-wrapper__hadib\",\"header\":\"EditHeader_header__1w-EQ\",\"left\":\"EditHeader_left__E8dfx\",\"main\":\"EditHeader_main__KJWP2\",\"right\":\"EditHeader_right__tgI14\"};","import React, { FC, useState, ChangeEvent } from 'react'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { useDispatch } from 'react-redux'\nimport { Button, Typography, Space, Input, message } from 'antd'\nimport { LeftOutlined, EditOutlined, LoadingOutlined } from '@ant-design/icons'\nimport { useRequest, useKeyPress, useDebounceEffect } from 'ahooks'\nimport EditToolbar from './EditToolbar'\nimport useGetPageInfo from '../../../hooks/useGetPageInfo'\nimport useGetComponentInfo from '../../../hooks/useGetComponentInfo'\nimport { changePageTitle } from '../../../store/pageInfoReducer'\nimport { updateQuestionService } from '../../../services/question'\nimport styles from './EditHeader.module.scss'\n\nconst { Title } = Typography\n\n// 显示和修改标题\nconst TitleElem: FC = () => {\n  const { title } = useGetPageInfo()\n  const dispatch = useDispatch()\n\n  const [editState, SetEditState] = useState(false)\n\n  function handleChange(event: ChangeEvent<HTMLInputElement>) {\n    const newTitle = event.target.value.trim()\n    if (!newTitle) return\n    dispatch(changePageTitle(newTitle))\n  }\n\n  if (editState) {\n    return (\n      <Input\n        value={title}\n        onChange={handleChange}\n        onPressEnter={() => SetEditState(false)}\n        onBlur={() => SetEditState(false)}\n      />\n    )\n  }\n\n  return (\n    <Space>\n      <Title>{title}</Title>\n      <Button icon={<EditOutlined />} type=\"text\" onClick={() => SetEditState(true)} />\n    </Space>\n  )\n}\n\n// 保存按钮\nconst SaveButton: FC = () => {\n  const { id } = useParams()\n  const { componentList = [] } = useGetComponentInfo()\n  const pageInfo = useGetPageInfo()\n\n  const { loading, run: save } = useRequest(\n    async () => {\n      if (!id) return\n      await updateQuestionService(id, { ...pageInfo, componentList })\n    },\n    { manual: true }\n  )\n\n  // 快捷键\n  useKeyPress(['ctrl.s', 'meta.s'], (event: KeyboardEvent) => {\n    event.preventDefault()\n    if (!loading) save()\n  })\n\n  // 自定保存（不是定期保存，不是定时器）\n  useDebounceEffect(\n    () => {\n      save()\n    },\n    [componentList, pageInfo],\n    {\n      wait: 1000,\n    }\n  )\n\n  return (\n    <Button onClick={save} disabled={loading} icon={loading ? <LoadingOutlined /> : null}>\n      保存\n    </Button>\n  )\n}\n\n// 发布按钮\nconst PublishButton: FC = () => {\n  const nav = useNavigate()\n  const { id } = useParams()\n  const { componentList = [] } = useGetComponentInfo()\n  const pageInfo = useGetPageInfo()\n\n  const { loading, run: pub } = useRequest(\n    async () => {\n      if (!id) return\n      await updateQuestionService(id, {\n        ...pageInfo,\n        componentList,\n        isPublished: true, // 标志着问卷已经被发布\n      })\n    },\n    {\n      manual: true,\n      onSuccess() {\n        message.success('发布成功')\n        nav('/question/stat/' + id) // 发布成功，跳转到统计页面\n      },\n    }\n  )\n\n  return (\n    <Button type=\"primary\" onClick={pub} disabled={loading}>\n      发布\n    </Button>\n  )\n}\n\n// 编辑器头部\nconst EditHeader: FC = () => {\n  const nav = useNavigate()\n\n  return (\n    <div className={styles['header-wrapper']}>\n      <div className={styles.header}>\n        <div className={styles.left}>\n          <Space>\n            <Button type=\"link\" icon={<LeftOutlined />} onClick={() => nav(-1)}>\n              返回\n            </Button>\n            <TitleElem />\n          </Space>\n        </div>\n        <div className={styles.main}>\n          <EditToolbar />\n        </div>\n        <div className={styles.right}>\n          <Space>\n            <SaveButton />\n            <PublishButton />\n          </Space>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default EditHeader\n","import { useKeyPress } from 'ahooks'\nimport { useDispatch } from 'react-redux'\nimport { ActionCreators as UndoActionCreators } from 'redux-undo'\nimport {\n  removeSelectedComponent,\n  copySelectedComponent,\n  pasteCopiedComponent,\n  selectPrevComponent,\n  selectNextComponent,\n} from '../store/componentsReducer'\n\n/**\n * 判断 activeElem 是否合法\n */\nfunction isActiveElementValid() {\n  const activeElem = document.activeElement\n\n  // // 没有增加 dnd-kit 之前\n  // if (activeElem === document.body) return true // 光标没有 focus 到 input\n\n  // 增加了 dnd-kit 以后\n  if (activeElem === document.body) return true\n  if (activeElem?.matches('div[role=\"button\"]')) return true\n\n  return false\n}\n\nfunction useBindCanvasKeyPress() {\n  const dispatch = useDispatch()\n\n  // 删除组件\n  useKeyPress(['backspace', 'delete'], () => {\n    if (!isActiveElementValid()) return\n    dispatch(removeSelectedComponent())\n  })\n\n  // 复制\n  useKeyPress(['ctrl.c', 'meta.c'], () => {\n    if (!isActiveElementValid()) return\n    dispatch(copySelectedComponent())\n  })\n\n  // 粘贴\n  useKeyPress(['ctrl.v', 'meta.v'], () => {\n    if (!isActiveElementValid()) return\n    dispatch(pasteCopiedComponent())\n  })\n\n  // 选中上一个\n  useKeyPress('uparrow', () => {\n    if (!isActiveElementValid()) return\n    dispatch(selectPrevComponent())\n  })\n\n  // 选中下一个\n  useKeyPress('downarrow', () => {\n    if (!isActiveElementValid()) return\n    dispatch(selectNextComponent())\n  })\n\n  // 撤销\n  useKeyPress(\n    ['ctrl.z', 'meta.z'],\n    () => {\n      if (!isActiveElementValid()) return\n      dispatch(UndoActionCreators.undo())\n    },\n    {\n      exactMatch: true, // 严格匹配\n    }\n  )\n\n  // 重做\n  useKeyPress(['ctrl.shift.z', 'meta.shift.z'], () => {\n    if (!isActiveElementValid()) return\n    dispatch(UndoActionCreators.redo())\n  })\n}\n\nexport default useBindCanvasKeyPress\n","import React, { FC } from 'react'\nimport {\n  DndContext,\n  closestCenter,\n  MouseSensor,\n  useSensor,\n  useSensors,\n  DragEndEvent,\n} from '@dnd-kit/core'\nimport {\n  // arrayMove,\n  SortableContext,\n  verticalListSortingStrategy,\n} from '@dnd-kit/sortable'\n\ntype PropsType = {\n  children: JSX.Element | JSX.Element[]\n  items: Array<{ id: string; [key: string]: any }>\n  onDragEnd: (oldIndex: number, newIndex: number) => void\n}\n\nconst SortableContainer: FC<PropsType> = (props: PropsType) => {\n  const { children, items, onDragEnd } = props\n\n  const sensors = useSensors(\n    useSensor(MouseSensor, {\n      activationConstraint: {\n        distance: 8, // 8px\n      },\n    })\n  )\n\n  function handleDragEnd(event: DragEndEvent) {\n    const { active, over } = event\n    if (over == null) return\n\n    if (active.id !== over.id) {\n      const oldIndex = items.findIndex(c => c.fe_id === active.id)\n      const newIndex = items.findIndex(c => c.fe_id === over.id)\n      onDragEnd(oldIndex, newIndex)\n    }\n  }\n\n  return (\n    <DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={handleDragEnd}>\n      <SortableContext items={items} strategy={verticalListSortingStrategy}>\n        {children}\n      </SortableContext>\n    </DndContext>\n  )\n}\n\nexport default SortableContainer\n","import React, { FC } from 'react'\nimport { useSortable } from '@dnd-kit/sortable'\nimport { CSS } from '@dnd-kit/utilities'\n\ntype PropsType = {\n  id: string\n  children: JSX.Element\n}\n\nconst SortableItem: FC<PropsType> = ({ id, children }) => {\n  const { attributes, listeners, setNodeRef, transform, transition } = useSortable({ id })\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    cursor: 'pointer',\n  }\n\n  return (\n    <div ref={setNodeRef} style={style} {...attributes} {...listeners}>\n      {children}\n    </div>\n  )\n}\n\nexport default SortableItem\n","// extracted by mini-css-extract-plugin\nexport default {\"canvas\":\"EditCanvas_canvas__cazQA\",\"component-wrapper\":\"EditCanvas_component-wrapper__DsHYx\",\"selected\":\"EditCanvas_selected__H31gS\",\"locked\":\"EditCanvas_locked__qbDcd\",\"component\":\"EditCanvas_component__8IYr3\"};","import React, { FC, MouseEvent } from 'react'\nimport { Spin } from 'antd'\nimport { useDispatch } from 'react-redux'\nimport classNames from 'classnames'\nimport useGetComponentInfo from '../../../hooks/useGetComponentInfo'\nimport { getComponentConfByType } from '../../../components/QuestionComponents/index'\nimport {\n  ComponentInfoType,\n  changeSelectedId,\n  moveComponent,\n} from '../../../store/componentsReducer'\nimport useBindCanvasKeyPress from '../../../hooks/useBindCanvasKeyPress'\nimport SortableContainer from '../../../components/DragSortable/SortableContainer'\nimport SortableItem from '../../../components/DragSortable/SortableItem'\nimport styles from './EditCanvas.module.scss'\n\n// // 临时静态展示一下 Title Input 的效果\n// import QuestionTitle from '../../../components/QuestionComponents/QuestionTitle/Component'\n// import QuestionInput from '../../../components/QuestionComponents/QuestionInput/Component'\n\ntype PropsType = {\n  loading: boolean\n}\n\nfunction genComponent(componentInfo: ComponentInfoType) {\n  const { type, props } = componentInfo // 每个组件的信息，是从 redux store 获取的（服务端获取）\n\n  const componentConf = getComponentConfByType(type)\n  if (componentConf == null) return null\n\n  const { Component } = componentConf\n  return <Component {...props} />\n}\n\nconst EditCanvas: FC<PropsType> = ({ loading }) => {\n  const { componentList, selectedId } = useGetComponentInfo()\n  const dispatch = useDispatch()\n\n  // 点击组件，选中\n  function handleClick(event: MouseEvent, id: string) {\n    event.stopPropagation() // 阻止冒泡\n    dispatch(changeSelectedId(id))\n  }\n\n  // 绑定快捷键\n  useBindCanvasKeyPress()\n\n  if (loading) {\n    return (\n      <div style={{ textAlign: 'center', marginTop: '24px' }}>\n        <Spin />\n      </div>\n    )\n  }\n\n  // SortableContainer 组件的 items 属性，需要每个 item 都有 id\n  const componentListWithId = componentList.map(c => {\n    return { ...c, id: c.fe_id }\n  })\n\n  // 拖拽排序结束\n  function handleDragEnd(oldIndex: number, newIndex: number) {\n    dispatch(moveComponent({ oldIndex, newIndex }))\n  }\n\n  return (\n    <SortableContainer items={componentListWithId} onDragEnd={handleDragEnd}>\n      <div className={styles.canvas}>\n        {componentList\n          .filter(c => !c.isHidden)\n          .map(c => {\n            const { fe_id, isLocked } = c\n\n            // 拼接 class name\n            const wrapperDefaultClassName = styles['component-wrapper']\n            const selectedClassName = styles.selected\n            const lockedClassName = styles.locked\n            const wrapperClassName = classNames({\n              [wrapperDefaultClassName]: true,\n              [selectedClassName]: fe_id === selectedId,\n              [lockedClassName]: isLocked,\n            })\n\n            return (\n              <SortableItem key={fe_id} id={fe_id}>\n                <div className={wrapperClassName} onClick={e => handleClick(e, fe_id)}>\n                  <div className={styles.component}>{genComponent(c)}</div>\n                </div>\n              </SortableItem>\n            )\n          })}\n        {/* <div className={styles['component-wrapper']}>\n        <div className={styles.component}>\n          <QuestionTitle />\n        </div>\n      </div>\n      <div className={styles['component-wrapper']}>\n        <div className={styles.component}>\n          <QuestionInput />\n        </div>\n      </div> */}\n      </div>\n    </SortableContainer>\n  )\n}\n\nexport default EditCanvas\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ComponentLib_wrapper__1kUNe\",\"component\":\"ComponentLib_component__Ghpyr\"};","import React, { FC, useCallback } from \"react\";\nimport { nanoid } from \"nanoid\";\nimport { Typography } from \"antd\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  componentConfGroup,\n  ComponentConfType,\n} from \"../../../components/QuestionComponents\";\nimport { addComponent } from \"../../../store/componentsReducer\";\nimport styles from \"./ComponentLib.module.scss\";\n\nconst { Title } = Typography;\n\nconst Lib: FC = () => {\n  const dispatch = useDispatch();\n  function genComponent(c: ComponentConfType, dispatch: any) {\n    const { title, type, Component, defaultProps } = c;\n    const handleClick = () => {\n      dispatch(\n        addComponent({\n          fe_id: nanoid(), // 前端生成的 id\n          title,\n          type,\n          props: defaultProps,\n        })\n      );\n    };\n\n    return (\n      <div key={type} className={styles.wrapper} onClick={handleClick}>\n        <div className={styles.component}>\n          <Component />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {componentConfGroup.map((group, index) => {\n        const { groupId, groupName, components } = group;\n\n        return (\n          <div key={groupId}>\n            <Title\n              level={3}\n              style={{ fontSize: \"16px\", marginTop: index > 0 ? \"20px\" : \"0\" }}\n            >\n              {groupName}\n            </Title>\n            <div>{components.map((c) => genComponent(c, dispatch))}</div>\n          </div>\n        );\n      })}\n    </>\n  );\n};\n\nexport default Lib;\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Layers_wrapper__Ngo9t\",\"title\":\"Layers_title__k+dnT\",\"selected\":\"Layers_selected__AwpYh\",\"handler\":\"Layers_handler__OzxxH\",\"btn\":\"Layers_btn__StJby\"};","import React, { FC, useState, ChangeEvent } from 'react'\nimport classNames from 'classnames'\nimport { message, Input, Button, Space } from 'antd'\nimport { EyeInvisibleOutlined, LockOutlined } from '@ant-design/icons'\nimport { useDispatch } from 'react-redux'\nimport useGetComponentInfo from '../../../hooks/useGetComponentInfo'\nimport {\n  changeSelectedId,\n  changeComponentTitle,\n  toggleComponentLocked,\n  changeComponentHidden,\n  moveComponent,\n} from '../../../store/componentsReducer'\nimport SortableContainer from '../../../components/DragSortable/SortableContainer'\nimport SortableItem from '../../../components/DragSortable/SortableItem'\nimport styles from './Layers.module.scss'\n\nconst Layers: FC = () => {\n  const { componentList, selectedId } = useGetComponentInfo()\n  const dispatch = useDispatch()\n\n  // 记录当前正在修改标题的组件\n  const [changingTitleId, setChangingTitleId] = useState('')\n\n  // 点击选中组件\n  function handleTitleClick(fe_id: string) {\n    const curComp = componentList.find(c => c.fe_id === fe_id)\n    if (curComp && curComp.isHidden) {\n      message.info('不能选中隐藏的组件')\n      return\n    }\n    if (fe_id !== selectedId) {\n      // 当前组件未被选中，执行选中\n      dispatch(changeSelectedId(fe_id))\n      setChangingTitleId('')\n      return\n    }\n\n    // 点击修改标题\n    setChangingTitleId(fe_id)\n  }\n\n  // 修改标题\n  function changeTitle(event: ChangeEvent<HTMLInputElement>) {\n    const newTitle = event.target.value.trim()\n    if (!newTitle) return\n    if (!selectedId) return\n    dispatch(changeComponentTitle({ fe_id: selectedId, title: newTitle }))\n  }\n\n  // 切换 隐藏/显示\n  function changeHidden(fe_id: string, isHidden: boolean) {\n    dispatch(changeComponentHidden({ fe_id, isHidden }))\n  }\n\n  // 切换 锁定/解锁\n  function changeLocked(fe_id: string) {\n    dispatch(toggleComponentLocked({ fe_id }))\n  }\n\n  // SortableContainer 组件的 items 属性，需要每个 item 都有 id\n  const componentListWithId = componentList.map(c => {\n    return { ...c, id: c.fe_id }\n  })\n\n  // 拖拽排序结束\n  function handleDragEnd(oldIndex: number, newIndex: number) {\n    dispatch(moveComponent({ oldIndex, newIndex }))\n  }\n\n  return (\n    <SortableContainer items={componentListWithId} onDragEnd={handleDragEnd}>\n      {componentList.map(c => {\n        const { fe_id, title, isHidden, isLocked } = c\n\n        // 拼接 title className\n        const titleDefaultClassName = styles.title\n        const selectedClassName = styles.selected\n        const titleClassName = classNames({\n          [titleDefaultClassName]: true,\n          [selectedClassName]: fe_id === selectedId,\n        })\n\n        return (\n          <SortableItem key={fe_id} id={fe_id}>\n            <div className={styles.wrapper}>\n              <div className={titleClassName} onClick={() => handleTitleClick(fe_id)}>\n                {fe_id === changingTitleId && (\n                  <Input\n                    value={title}\n                    onChange={changeTitle}\n                    onPressEnter={() => setChangingTitleId('')}\n                    onBlur={() => setChangingTitleId('')}\n                  />\n                )}\n                {fe_id !== changingTitleId && title}\n              </div>\n              <div className={styles.handler}>\n                <Space>\n                  <Button\n                    size=\"small\"\n                    shape=\"circle\"\n                    className={!isHidden ? styles.btn : ''}\n                    icon={<EyeInvisibleOutlined />}\n                    type={isHidden ? 'primary' : 'text'}\n                    onClick={() => changeHidden(fe_id, !isHidden)}\n                  />\n                  <Button\n                    size=\"small\"\n                    shape=\"circle\"\n                    className={!isLocked ? styles.btn : ''}\n                    icon={<LockOutlined />}\n                    type={isLocked ? 'primary' : 'text'}\n                    onClick={() => changeLocked(fe_id)}\n                  />\n                </Space>\n              </div>\n            </div>\n          </SortableItem>\n        )\n      })}\n    </SortableContainer>\n  )\n}\n\nexport default Layers\n","import React, { FC } from 'react'\nimport { Tabs } from 'antd'\nimport { AppstoreOutlined, BarsOutlined } from '@ant-design/icons'\nimport ComponentLib from './ComponentLib'\nimport Layers from './Layers'\n\nconst LeftPanel: FC = () => {\n  const tabsItems = [\n    {\n      key: 'componentLib',\n      label: (\n        <span>\n          <AppstoreOutlined />\n          组件库\n        </span>\n      ),\n      children: <ComponentLib />,\n    },\n    {\n      key: 'layers',\n      label: (\n        <span>\n          <BarsOutlined />\n          图层\n        </span>\n      ),\n      children: <Layers />,\n    },\n  ]\n\n  return <Tabs defaultActiveKey=\"componentLib\" items={tabsItems} />\n}\n\nexport default LeftPanel\n","import React, { FC } from 'react'\nimport { useDispatch } from 'react-redux'\nimport useGetComponentInfo from '../../../hooks/useGetComponentInfo'\nimport { getComponentConfByType, ComponentPropsType } from '../../../components/QuestionComponents'\nimport { changeComponentProps } from '../../../store/componentsReducer'\n\nconst NoProp: FC = () => {\n  return <div style={{ textAlign: 'center' }}>未选中组件</div>\n}\n\nconst ComponentProp: FC = () => {\n  const dispatch = useDispatch()\n\n  const { selectedComponent } = useGetComponentInfo()\n  if (selectedComponent == null) return <NoProp />\n\n  const { type, props, isLocked, isHidden } = selectedComponent\n  const componentConf = getComponentConfByType(type)\n  if (componentConf == null) return <NoProp />\n\n  function changeProps(newProps: ComponentPropsType) {\n    if (selectedComponent == null) return\n    const { fe_id } = selectedComponent\n    dispatch(changeComponentProps({ fe_id, newProps }))\n  }\n\n  const { PropComponent } = componentConf\n  return <PropComponent {...props} onChange={changeProps} disabled={isLocked || isHidden} />\n}\n\nexport default ComponentProp\n","import React, { FC, useEffect } from 'react'\nimport { Form, Input } from 'antd'\nimport { useDispatch } from 'react-redux'\nimport useGetPageInfo from '../../../hooks/useGetPageInfo'\nimport { resetPageInfo } from '../../../store/pageInfoReducer'\n\nconst { TextArea } = Input\n\nconst PageSetting: FC = () => {\n  const pageInfo = useGetPageInfo()\n  // const { title, desc, js, css } = pageInfo\n  const [form] = Form.useForm()\n  const dispatch = useDispatch()\n\n  // 实时更新表单内容\n  useEffect(() => {\n    form.setFieldsValue(pageInfo)\n  }, [pageInfo])\n\n  function handleValuesChange() {\n    dispatch(resetPageInfo(form.getFieldsValue()))\n  }\n\n  return (\n    <Form\n      layout=\"vertical\"\n      initialValues={pageInfo}\n      onValuesChange={handleValuesChange}\n      form={form}\n    >\n      <Form.Item label=\"问卷标题\" name=\"title\" rules={[{ required: true, message: '请输入标题' }]}>\n        <Input placeholder=\"请输入标题\" />\n      </Form.Item>\n      <Form.Item label=\"问卷描述\" name=\"desc\">\n        <TextArea placeholder=\"问卷描述...\" />\n      </Form.Item>\n      <Form.Item label=\"样式代码\" name=\"css\">\n        <TextArea placeholder=\"输入 CSS 样式代码...\" />\n      </Form.Item>\n      <Form.Item label=\"脚本代码\" name=\"js\">\n        <TextArea placeholder=\"输入 JS 脚本代码...\" />\n      </Form.Item>\n    </Form>\n  )\n}\n\nexport default PageSetting\n","import React, { FC, useEffect, useState } from 'react'\nimport { Tabs } from 'antd'\nimport { FileTextOutlined, SettingOutlined } from '@ant-design/icons'\nimport ComponentProp from './ComponentProp'\nimport PageSetting from './PageSetting'\nimport useGetComponentInfo from '../../../hooks/useGetComponentInfo'\n\n// TS 枚举\nenum TAB_KEYS {\n  PROP_KEY = 'prop',\n  SETTING_KEY = 'setting',\n}\n\nconst RightPanel: FC = () => {\n  const [activeKey, setActiveKey] = useState(TAB_KEYS.PROP_KEY)\n  const { selectedId } = useGetComponentInfo()\n\n  useEffect(() => {\n    if (selectedId) setActiveKey(TAB_KEYS.PROP_KEY)\n    else setActiveKey(TAB_KEYS.SETTING_KEY)\n  }, [selectedId])\n\n  const tabsItems = [\n    {\n      key: TAB_KEYS.PROP_KEY,\n      label: (\n        <span>\n          <FileTextOutlined />\n          属性\n        </span>\n      ),\n      children: <ComponentProp />,\n    },\n    {\n      key: TAB_KEYS.SETTING_KEY,\n      label: (\n        <span>\n          <SettingOutlined />\n          页面设置\n        </span>\n      ),\n      children: <PageSetting />,\n    },\n  ]\n\n  return <Tabs activeKey={activeKey} items={tabsItems}></Tabs>\n}\n\nexport default RightPanel\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Edit_container__bi3-2\",\"content-wrapper\":\"Edit_content-wrapper__JM839\",\"content\":\"Edit_content__zPwhR\",\"left\":\"Edit_left__svytE\",\"main\":\"Edit_main__Sqyol\",\"canvas-wrapper\":\"Edit_canvas-wrapper__-h80W\",\"right\":\"Edit_right__MNPKz\"};","import React, { FC } from 'react'\n// import { useParams } from 'react-router-dom'\nimport { useDispatch } from 'react-redux'\nimport { useTitle } from 'ahooks'\nimport { changeSelectedId } from '../../../store/componentsReducer'\nimport useLoadQuestionData from '../../../hooks/useLoadQuestionData'\nimport useGetPageInfo from '../../../hooks/useGetPageInfo'\nimport EditHeader from './EditHeader'\nimport EditCanvas from './EditCanvas'\nimport LeftPanel from './LeftPanel'\nimport RightPanel from './RightPanel'\nimport styles from './index.module.scss'\n\nconst Edit: FC = () => {\n  // const { id = '' } = useParams()\n  const dispatch = useDispatch()\n\n  const { loading } = useLoadQuestionData()\n\n  function clearSelectedId() {\n    dispatch(changeSelectedId(''))\n  }\n\n  // 修改标题\n  const { title } = useGetPageInfo()\n  useTitle(`问卷编辑 - ${title}`)\n\n  return (\n    <div className={styles.container}>\n      <EditHeader />\n      <div className={styles['content-wrapper']}>\n        <div className={styles.content}>\n          <div className={styles.left}>\n            <LeftPanel />\n          </div>\n          <div className={styles.main} onClick={clearSelectedId}>\n            <div className={styles['canvas-wrapper']}>\n              <EditCanvas loading={loading} />\n            </div>\n          </div>\n          <div className={styles.right}>\n            <RightPanel />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Edit\n"],"names":["EditToolbar","dispatch","useDispatch","selectedId","componentList","selectedComponent","copiedComponent","useGetComponentInfo","isLocked","length","selectedIndex","findIndex","c","fe_id","isFirst","isLast","_jsxs","Space","children","_jsx","Tooltip","title","Button","shape","icon","DeleteOutlined","onClick","removeSelectedComponent","EyeInvisibleOutlined","changeComponentHidden","isHidden","LockOutlined","toggleComponentLocked","type","CopyOutlined","copySelectedComponent","BlockOutlined","pasteCopiedComponent","disabled","UpOutlined","moveComponent","oldIndex","newIndex","DownOutlined","UndoOutlined","UndoActionCreators","undo","RedoOutlined","redo","Title","Typography","TitleElem","useGetPageInfo","editState","SetEditState","useState","Input","value","onChange","event","newTitle","target","trim","changePageTitle","onPressEnter","onBlur","EditOutlined","SaveButton","id","useParams","pageInfo","loading","run","save","useRequest","async","updateQuestionService","manual","useKeyPress","preventDefault","useDebounceEffect","wait","LoadingOutlined","PublishButton","nav","useNavigate","pub","isPublished","onSuccess","message","success","EditHeader","className","styles","LeftOutlined","isActiveElementValid","activeElem","document","activeElement","body","matches","selectPrevComponent","selectNextComponent","exactMatch","props","items","onDragEnd","sensors","useSensors","useSensor","MouseSensor","activationConstraint","distance","DndContext","collisionDetection","closestCenter","active","over","SortableContext","strategy","verticalListSortingStrategy","_ref","attributes","listeners","setNodeRef","transform","transition","useSortable","style","CSS","Transform","toString","cursor","ref","genComponent","componentInfo","componentConf","getComponentConfByType","Component","useBindCanvasKeyPress","textAlign","marginTop","Spin","componentListWithId","map","SortableContainer","filter","wrapperDefaultClassName","selectedClassName","lockedClassName","wrapperClassName","classNames","SortableItem","e","handleClick","stopPropagation","changeSelectedId","Lib","_Fragment","componentConfGroup","group","index","groupId","groupName","components","level","fontSize","defaultProps","addComponent","nanoid","Layers","changingTitleId","setChangingTitleId","changeTitle","changeComponentTitle","titleDefaultClassName","titleClassName","curComp","find","info","handleTitleClick","size","changeHidden","changeLocked","LeftPanel","tabsItems","key","label","AppstoreOutlined","ComponentLib","BarsOutlined","Tabs","defaultActiveKey","NoProp","ComponentProp","PropComponent","newProps","changeComponentProps","TextArea","PageSetting","form","Form","useForm","useEffect","setFieldsValue","layout","initialValues","onValuesChange","resetPageInfo","getFieldsValue","Item","name","rules","required","placeholder","TAB_KEYS","RightPanel","activeKey","setActiveKey","PROP_KEY","SETTING_KEY","FileTextOutlined","SettingOutlined","Edit","useLoadQuestionData","useTitle","concat","EditCanvas"],"sourceRoot":""}